import { readFile } from 'fs';
/** A simple cache used to store the serialized animation data. */
const cache = new Map();
export function readFileWithAnimationData(path) {
    return cache.has(path)
        ? Promise.resolve(cache.get(path))
        : new Promise((resolve, reject) => {
            readFile(path, (error, buffer) => {
                if (error) {
                    reject(error);
                }
                else {
                    const data = buffer.toString();
                    cache.set(path, data);
                    resolve(data);
                }
            });
        });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL25neC1sb3R0aWUvc2VydmVyL3NyYy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBSTlCLGtFQUFrRTtBQUNsRSxNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBeUIsQ0FBQztBQUUvQyxNQUFNLFVBQVUseUJBQXlCLENBQUMsSUFBWTtJQUNwRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO1FBQ3BCLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFFLENBQUM7UUFDbkMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQzlCLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQy9CLElBQUksS0FBSyxFQUFFLENBQUM7b0JBQ1YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNoQixDQUFDO3FCQUFNLENBQUM7b0JBQ04sTUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUMvQixLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDdEIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoQixDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztBQUNULENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZSB9IGZyb20gJ2ZzJztcblxuaW1wb3J0IHsgQW5pbWF0aW9uRGF0YSB9IGZyb20gJy4vc3ltYm9scyc7XG5cbi8qKiBBIHNpbXBsZSBjYWNoZSB1c2VkIHRvIHN0b3JlIHRoZSBzZXJpYWxpemVkIGFuaW1hdGlvbiBkYXRhLiAqL1xuY29uc3QgY2FjaGUgPSBuZXcgTWFwPHN0cmluZywgQW5pbWF0aW9uRGF0YT4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRGaWxlV2l0aEFuaW1hdGlvbkRhdGEocGF0aDogc3RyaW5nKTogUHJvbWlzZTxBbmltYXRpb25EYXRhPiB7XG4gIHJldHVybiBjYWNoZS5oYXMocGF0aClcbiAgICA/IFByb21pc2UucmVzb2x2ZShjYWNoZS5nZXQocGF0aCkhKVxuICAgIDogbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICByZWFkRmlsZShwYXRoLCAoZXJyb3IsIGJ1ZmZlcikgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlci50b1N0cmluZygpO1xuICAgICAgICAgICAgY2FjaGUuc2V0KHBhdGgsIGRhdGEpO1xuICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG59XG4iXX0=